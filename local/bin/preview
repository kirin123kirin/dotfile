#!/bin/bash
function lscompress {   # lscompress any archived file
  case "$1" in
    *.tar.bz2|*.tar.gz|*.tar.xz|*.tbz2|*.tgz|*.txz|*.tar|*.zip) 
                  less   "$1" | head -c 512     ;;
    *.bz2)        bzless "$1" | head -c 512     ;;
    *.gz|*.z|*.Z) zless  "$1" | head -c 512     ;;
    *.xz)         xzless "$1" | head -c 512     ;;
    *)
         echo "lscompress: $1 - unknown archive method"
         return 1
         ;;
  esac
}

echo [Path] $(realpath $1)

if [ ! -e $1 ];then
  echo "[WARN] File or Directory Not Found"
  exit 1
fi

echo [Type] $(file -b $1)
if [ -d $1 ]; then
  printf "[Detail] "
else
  echo "[Detail]"
fi
ls -lh $1

if [ -f $1 ]; then
  typeset pth
  if [ -L $1 ];then
    pth=$(readlink -f $1)
  else
    pth=$1
  fi
  echo "[Content]"
  if [ $(file --mime-encoding -b $pth) = "binary" ]; then
    if file $1 | grep -qs "compressed data"; then
      lscompress $pth
    else
      file $pth
    fi
  else
    head -c 512 $pth
  fi
fi
exit 0
